# Changelog


## [3.0.2](https://github.com/GoogleCloudPlatform/docker-clamav-malware-scanner/compare/v3.0.1...v3.0.2) (2024-09-16)


### Bug Fixes

* **deps:** update npm-packages ([#217](https://github.com/GoogleCloudPlatform/docker-clamav-malware-scanner/issues/217)) ([d2f40ba](https://github.com/GoogleCloudPlatform/docker-clamav-malware-scanner/commit/d2f40ba198a7f01e6638f374e9c7f4cf19fd4ea6))

## [3.0.1](https://github.com/GoogleCloudPlatform/docker-clamav-malware-scanner/compare/v3.0.0...v3.0.1) (2024-09-11)


### Bug Fixes

* **deps:** override send version to fix vulnerability ([#216](https://github.com/GoogleCloudPlatform/docker-clamav-malware-scanner/issues/216)) ([af82b21](https://github.com/GoogleCloudPlatform/docker-clamav-malware-scanner/commit/af82b21153a340a3e0d66621693aa8f9f888f1e3))
* **deps:** update node.js to v22.8.0 ([#204](https://github.com/GoogleCloudPlatform/docker-clamav-malware-scanner/issues/204)) ([5691156](https://github.com/GoogleCloudPlatform/docker-clamav-malware-scanner/commit/569115662e90f3ddf02eef74bd04bf45b7fc961c))
* **deps:** update npm-packages ([#195](https://github.com/GoogleCloudPlatform/docker-clamav-malware-scanner/issues/195)) ([77bc502](https://github.com/GoogleCloudPlatform/docker-clamav-malware-scanner/commit/77bc502d706d28f68f92439556a6224e097cafee))
* updated export interval to be 20 seconds instead of 20 milliseconds ([#209](https://github.com/GoogleCloudPlatform/docker-clamav-malware-scanner/issues/209)) ([0dbe25f](https://github.com/GoogleCloudPlatform/docker-clamav-malware-scanner/commit/0dbe25fa02328f3890501b95d3757021ddb46722))

## [3.0.0](https://github.com/GoogleCloudPlatform/docker-clamav-malware-scanner/compare/v2.6.3...v3.0.0) (2024-07-30)


### âš  BREAKING CHANGES

* metric names have changed from custom.googleapis.com/opencensus/malware-scanning/METRIC-NAME to workload.googleapis.com/googlecloudplatform/gcs-malware-scanning/METRIC-NAME

### Bug Fixes

* change from deprecated opencencus to opentelemetry for metrics ([#191](https://github.com/GoogleCloudPlatform/docker-clamav-malware-scanner/issues/191)) ([64438da](https://github.com/GoogleCloudPlatform/docker-clamav-malware-scanner/commit/64438dad442b91ed43def27c46771e8cef3343af))

## [2.6.3](https://github.com/GoogleCloudPlatform/docker-clamav-malware-scanner/compare/v2.6.2...v2.6.3) (2024-07-30)


### Bug Fixes

* **deps:** bump fast-xml-parser ([#192](https://github.com/GoogleCloudPlatform/docker-clamav-malware-scanner/issues/192)) ([b2da217](https://github.com/GoogleCloudPlatform/docker-clamav-malware-scanner/commit/b2da2170b1e7f81c060b50551f3c21ebbc713f66))
* **deps:** bump husky from 9.1.3 to 9.1.4 in /cloudrun-malware-scanner ([#190](https://github.com/GoogleCloudPlatform/docker-clamav-malware-scanner/issues/190)) ([0a70186](https://github.com/GoogleCloudPlatform/docker-clamav-malware-scanner/commit/0a70186a2c748051e97d44981cb6c7e9d0661372))

## [2.6.2](https://github.com/GoogleCloudPlatform/docker-clamav-malware-scanner/compare/v2.6.1...v2.6.2) (2024-07-29)


### Bug Fixes

* **deps:** Batch update dependencies ([#173](https://github.com/GoogleCloudPlatform/docker-clamav-malware-scanner/issues/173)) ([dbab751](https://github.com/GoogleCloudPlatform/docker-clamav-malware-scanner/commit/dbab751f0f9b6be3b1823f183154260969f35dc7))
* **deps:** bump globals in /cloudrun-malware-scanner ([#155](https://github.com/GoogleCloudPlatform/docker-clamav-malware-scanner/issues/155)) ([dfe93aa](https://github.com/GoogleCloudPlatform/docker-clamav-malware-scanner/commit/dfe93aa7491881637d4cbfa794a96ff9ecf55d87))
* **deps:** update dependency @google-cloud/storage to ^7.12.0 ([dbab751](https://github.com/GoogleCloudPlatform/docker-clamav-malware-scanner/commit/dbab751f0f9b6be3b1823f183154260969f35dc7))
* **deps:** update dependency google-auth-library to ^9.11.0 ([#156](https://github.com/GoogleCloudPlatform/docker-clamav-malware-scanner/issues/156)) ([b29d40e](https://github.com/GoogleCloudPlatform/docker-clamav-malware-scanner/commit/b29d40e32eace80ca75e65c71f91f74550ef6484))
* **deps:** update dependency google-auth-library to v9.11.0 ([#140](https://github.com/GoogleCloudPlatform/docker-clamav-malware-scanner/issues/140)) ([d49fb30](https://github.com/GoogleCloudPlatform/docker-clamav-malware-scanner/commit/d49fb3085baaaa8f814196bb9671657e33e23be8))
* **deps:** update dependency husky to ^9.1.1 ([dbab751](https://github.com/GoogleCloudPlatform/docker-clamav-malware-scanner/commit/dbab751f0f9b6be3b1823f183154260969f35dc7))
* **deps:** update dependency pino to ^9.2.0 ([#157](https://github.com/GoogleCloudPlatform/docker-clamav-malware-scanner/issues/157)) ([aca13c7](https://github.com/GoogleCloudPlatform/docker-clamav-malware-scanner/commit/aca13c7a5dc0265725e0c6cfa5436c54838cc96b))
* **deps:** update dependency pino to ^9.3.1 ([dbab751](https://github.com/GoogleCloudPlatform/docker-clamav-malware-scanner/commit/dbab751f0f9b6be3b1823f183154260969f35dc7))
* **deps:** update dependency pino to v9.2.0 ([#139](https://github.com/GoogleCloudPlatform/docker-clamav-malware-scanner/issues/139)) ([7e8730a](https://github.com/GoogleCloudPlatform/docker-clamav-malware-scanner/commit/7e8730a8f6322a980929c24ffa39236bb5d69097))
* **deps:** update dependency prettier to ^3.3.3 ([dbab751](https://github.com/GoogleCloudPlatform/docker-clamav-malware-scanner/commit/dbab751f0f9b6be3b1823f183154260969f35dc7))
* **deps:** update dependency typescript to ^5.5.3 ([#158](https://github.com/GoogleCloudPlatform/docker-clamav-malware-scanner/issues/158)) ([4e670d7](https://github.com/GoogleCloudPlatform/docker-clamav-malware-scanner/commit/4e670d7ed727ba8c564b10020587d009a4b7548a))
* **deps:** update dependency typescript to v5.5.3 ([#150](https://github.com/GoogleCloudPlatform/docker-clamav-malware-scanner/issues/150)) ([c835d34](https://github.com/GoogleCloudPlatform/docker-clamav-malware-scanner/commit/c835d345498b94a1bbdaf1eca9df63f08280553c))
* **deps:** update eslint monorepo to ^9.6.0 ([#144](https://github.com/GoogleCloudPlatform/docker-clamav-malware-scanner/issues/144)) ([64fd9ab](https://github.com/GoogleCloudPlatform/docker-clamav-malware-scanner/commit/64fd9ab5c08a4371e280ecf85bd8a91bf3590aa8))
* **deps:** update eslint monorepo to ^9.7.0 ([dbab751](https://github.com/GoogleCloudPlatform/docker-clamav-malware-scanner/commit/dbab751f0f9b6be3b1823f183154260969f35dc7))
* **deps:** update node.js to v22.4.1 ([dbab751](https://github.com/GoogleCloudPlatform/docker-clamav-malware-scanner/commit/dbab751f0f9b6be3b1823f183154260969f35dc7))
* **deps:** update node.js to v22.5.1 ([#187](https://github.com/GoogleCloudPlatform/docker-clamav-malware-scanner/issues/187)) ([88c45a6](https://github.com/GoogleCloudPlatform/docker-clamav-malware-scanner/commit/88c45a63766476cbdbc949a5c79b298e1aae6490))
* **deps:** update npm-packages ([#188](https://github.com/GoogleCloudPlatform/docker-clamav-malware-scanner/issues/188)) ([1a4e136](https://github.com/GoogleCloudPlatform/docker-clamav-malware-scanner/commit/1a4e136bc6b6e2d61540c947772224e9c3db7c68))

## [2.6.1](https://github.com/GoogleCloudPlatform/docker-clamav-malware-scanner/compare/v2.6.0...v2.6.1) (2024-06-11)


### Bug Fixes

* **deps:** Bump globals in /cloudrun-malware-scanner ([#131](https://github.com/GoogleCloudPlatform/docker-clamav-malware-scanner/issues/131)) ([47747b3](https://github.com/GoogleCloudPlatform/docker-clamav-malware-scanner/commit/47747b3be0a9f14ae47ed955bfefe65241f12ba1))
* **deps:** update dependency @google-cloud/storage to v7.11.2 ([#134](https://github.com/GoogleCloudPlatform/docker-clamav-malware-scanner/issues/134)) ([892b036](https://github.com/GoogleCloudPlatform/docker-clamav-malware-scanner/commit/892b036722e78ad41f9ff33f3b2ad9e74a543033))
* **deps:** update dependency prettier to v3.3.2 ([#135](https://github.com/GoogleCloudPlatform/docker-clamav-malware-scanner/issues/135)) ([010b445](https://github.com/GoogleCloudPlatform/docker-clamav-malware-scanner/commit/010b445eb8746463b4bcfd446554b8e76e6dee2e))
* Ensure pino log messages have sequential insertId ([#138](https://github.com/GoogleCloudPlatform/docker-clamav-malware-scanner/issues/138)) ([d8599d6](https://github.com/GoogleCloudPlatform/docker-clamav-malware-scanner/commit/d8599d6c82a9c5997342f85180294764dca1346d))

## [2.6.0](https://github.com/GoogleCloudPlatform/docker-clamav-malware-scanner/compare/v2.5.0...v2.6.0) (2024-06-05)


### Features

* Replace Bunyan logger with Pino ([#129](https://github.com/GoogleCloudPlatform/docker-clamav-malware-scanner/issues/129)) ([09de22a](https://github.com/GoogleCloudPlatform/docker-clamav-malware-scanner/commit/09de22a38813813ae84364db9228ca017eca9fd4))

## [2.5.0](https://github.com/GoogleCloudPlatform/docker-clamav-malware-scanner/compare/v2.4.1...v2.5.0) (2024-05-24)


### Features

* Add ability to read full config from env var ([#120](https://github.com/GoogleCloudPlatform/docker-clamav-malware-scanner/issues/120)) ([627cc1f](https://github.com/GoogleCloudPlatform/docker-clamav-malware-scanner/commit/627cc1f163ea05faaad93b460f9fba35fcfac20f))


### Bug Fixes

* disable apt EIPP logging ([fc5f096](https://github.com/GoogleCloudPlatform/docker-clamav-malware-scanner/commit/fc5f0961403cd6b50ea5be1e1023873fcf4439d7))
* remove dependancy on mv and transient dependency on inflight ([94f9a99](https://github.com/GoogleCloudPlatform/docker-clamav-malware-scanner/commit/94f9a9935349ab81e9373c87312e8dbef0ecb939))

## [2.4.1](https://github.com/GoogleCloudPlatform/docker-clamav-malware-scanner/compare/v2.4.0...v2.4.1) (2024-05-22)


### Bug Fixes

* Add typescript js compilation checks, and fix resulting errors ([#118](https://github.com/GoogleCloudPlatform/docker-clamav-malware-scanner/issues/118)) ([2087bd9](https://github.com/GoogleCloudPlatform/docker-clamav-malware-scanner/commit/2087bd9745515f4be395a6ab1c9c1414f0125441))
* docker build fails due to husky ([298f659](https://github.com/GoogleCloudPlatform/docker-clamav-malware-scanner/commit/298f659978cb8c299804642ee01b8de5c040f1d6))

## [2.4.0](https://github.com/GoogleCloudPlatform/docker-clamav-malware-scanner/compare/v2.3.1...v2.4.0) (2024-05-21)


### Features

* Add prettier formatter ([5010a16](https://github.com/GoogleCloudPlatform/docker-clamav-malware-scanner/commit/5010a168a6a345f0c49883ee905005bfbbdcf65d))


### Bug Fixes

* **deps:** Bump @google-cloud/logging-bunyan in /cloudrun-malware-scanner ([#100](https://github.com/GoogleCloudPlatform/docker-clamav-malware-scanner/issues/100)) ([a4d018e](https://github.com/GoogleCloudPlatform/docker-clamav-malware-scanner/commit/a4d018e0376df587d0ac232d661ea6a537f3befe))
* **deps:** Bump @google-cloud/storage in /cloudrun-malware-scanner ([#109](https://github.com/GoogleCloudPlatform/docker-clamav-malware-scanner/issues/109)) ([a4d018e](https://github.com/GoogleCloudPlatform/docker-clamav-malware-scanner/commit/a4d018e0376df587d0ac232d661ea6a537f3befe))
* **deps:** Bump express from 4.18.3 to 4.19.2 in /cloudrun-malware-scanner ([#96](https://github.com/GoogleCloudPlatform/docker-clamav-malware-scanner/issues/96)) ([a4d018e](https://github.com/GoogleCloudPlatform/docker-clamav-malware-scanner/commit/a4d018e0376df587d0ac232d661ea6a537f3befe))
* **deps:** Bump google-auth-library in /cloudrun-malware-scanner ([#110](https://github.com/GoogleCloudPlatform/docker-clamav-malware-scanner/issues/110)) ([a4d018e](https://github.com/GoogleCloudPlatform/docker-clamav-malware-scanner/commit/a4d018e0376df587d0ac232d661ea6a537f3befe))
* **deps:** Bump node from 21 to 22 in /cloudrun-malware-scanner ([#107](https://github.com/GoogleCloudPlatform/docker-clamav-malware-scanner/issues/107)) ([a4d018e](https://github.com/GoogleCloudPlatform/docker-clamav-malware-scanner/commit/a4d018e0376df587d0ac232d661ea6a537f3befe))
* Update Dockerfile to fix cloud sdk repository change ([#115](https://github.com/GoogleCloudPlatform/docker-clamav-malware-scanner/issues/115)) ([a19dfe3](https://github.com/GoogleCloudPlatform/docker-clamav-malware-scanner/commit/a19dfe34cfbdaec1525cb3e82f098b594501b373)), closes [#88](https://github.com/GoogleCloudPlatform/docker-clamav-malware-scanner/issues/88)
* Updates for eslint 9.3 ([9f99e65](https://github.com/GoogleCloudPlatform/docker-clamav-malware-scanner/commit/9f99e65a9cf3445b4cc22ddc0eb5c6a13647df5b))

## [2.3.1](https://github.com/GoogleCloudPlatform/docker-clamav-malware-scanner/compare/release_v2_3_0...release_v2_3_1) (2023-28-11)

### What's Changed

* Bump google-auth-library from 8.8.0 to 9.2.0 in /cloudrun-malware-scanner by @dependabot in https://github.com/GoogleCloudPlatform/docker-clamav-malware-scanner/pull/64
* Bump @google-cloud/common from 4.0.3 to 5.0.1 in /cloudrun-malware-scanner by @dependabot in https://github.com/GoogleCloudPlatform/docker-clamav-malware-scanner/pull/65
* Bump @google-cloud/storage from 6.11.0 to 7.6.0 in /cloudrun-malware-scanner by @dependabot in https://github.com/GoogleCloudPlatform/docker-clamav-malware-scanner/pull/66
* Bump @google-cloud/logging-bunyan from 4.2.2 to 5.0.1 in /cloudrun-malware-scanner by @dependabot in https://github.com/GoogleCloudPlatform/docker-clamav-malware-scanner/pull/67
* Update dependancies in https://github.com/GoogleCloudPlatform/docker-clamav-malware-scanner/pull/69
* Update Useragent string to correct format in https://github.com/GoogleCloudPlatform/docker-clamav-malware-scanner/pull/68


## [2.3.0](https://github.com/GoogleCloudPlatform/docker-clamav-malware-scanner/compare/release_v2_2_0...release_v2_3_0) (2023-11-27)

### What's Changed

* Add Dependabot and eslint workflows n https://github.com/GoogleCloudPlatform/docker-clamav-malware-scanner/pull/61
* Update package versions and remove cloud-run-proxy in https://github.com/GoogleCloudPlatform/docker-clamav-malware-scanner/pull/60


## [2.2.0](https://github.com/GoogleCloudPlatform/docker-clamav-malware-scanner/compare/release_v2_1_0...release_v2_2_0) (2023-11-22)

### What's Changed

* Add support for using environmental variables in the config.json file.


## [2.1.0](https://github.com/GoogleCloudPlatform/docker-clamav-malware-scanner/compare/release_v2_0_0...release_v2_1_0) (2023-06-22)

### What's Changed

* Fix issues with pip3 packages and APT key for cloud SDK
* Resolve #46 where docker build failed, and #50 where pip3 installs failed


## [2.0.0](https://github.com/GoogleCloudPlatform/docker-clamav-malware-scanner/compare/release_v1_7_0...release_v2_0_0) (2022-12-05)

### âš  BREAKING CHANGES

* Adds support for mirror of ClamAV malware DB, prevents update ratelimiting and startup problems
* Resolve #35 where ClamAV update servers blacklist cloud run IPs. adds a local cache of ClamAV definition files which is updated on a schedule.


## [1.7.0](https://github.com/GoogleCloudPlatform/docker-clamav-malware-scanner/compare/release_v1_6_0...release_v1_7_0) (2022-06-07)

### What's Changed

* Fix issues with clamav not being able to be updated
* Bump moment from 2.29.1 to 2.29.2 in /cloudrun-malware-scanner (#31)
* Bump node-forge from 1.2.1 to 1.3.0 in /cloudrun-malware-scanner (#29)
* Bump minimist from 1.2.5 to 1.2.6 in /cloudrun-malware-scanner (#30)
* Update package versions - fixes security issue


## [1.6.0](https://github.com/GoogleCloudPlatform/docker-clamav-malware-scanner/compare/release_v1_5_0...release_v1_6_0) (2022-03-01)

### What's Changed

* Increase default clamav file size limits to 500MiB


## [1.5.0](https://github.com/GoogleCloudPlatform/docker-clamav-malware-scanner/compare/release_v1_4_0...release_v1_5_0) (2022-02-25)

### What's Changed

* Upgrade dependancies to fix node-forge vulnerability (#25)


## [1.4.0](https://github.com/GoogleCloudPlatform/docker-clamav-malware-scanner/compare/release_v1_3_0...release_v1_4_0) (2022-02-11)

### What's Changed

* Bump node-fetch from 2.6.5 to 3.1.1


## [1.3.0](https://github.com/GoogleCloudPlatform/docker-clamav-malware-scanner/compare/release_v1_2_0...release_v1_3_0) (2021-11-23)

### What's Changed

* Remove need for Project Viewer permissions

## [1.2.0] (2021-11-08)

* Add support for scanning multiple buckets, improve error handling to prevent infinite retries

## 2021-10-22

* Improve resiliency
* Use streaming reads (no temp disk required)
* improve logging
* handles files in subdirectories

## 2021-10-14

* Use Cloud Run and EventArc instead of Cloud Functions/App Engine

## 2020-10-05

* Fixes for ClamAV OOM

## 2019-09-01

* Initial version
